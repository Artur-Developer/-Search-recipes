"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _axios=_interopRequireDefault(require("axios"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,n,t){return n&&_defineProperties(e.prototype,n),t&&_defineProperties(e,t),e}var Recipe=function(){function Recipe(e){_classCallCheck(this,Recipe),this.id=e}return _createClass(Recipe,[{key:"getRecipe",value:function(){var n,t;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n="".concat("https://cors-anywhere.herokuapp.com/","https://forkify-api.herokuapp.com/api/get?rId=").concat(this.id),e.next=5,regeneratorRuntime.awrap((0,_axios.default)("".concat(n)));case 5:t=e.sent,this.title=t.data.recipe.title,this.img=t.data.recipe.image_url,this.ingredients=t.data.recipe.ingredients,this.publisher=t.data.recipe.publisher,this.publisher_url=t.data.recipe.publisher_url,this.rank=t.data.recipe.social_rank,console.log(t),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),console.log(e.t0);case 18:case"end":return e.stop()}},null,this,[[0,15]])}},{key:"calcCookTime",value:function(){var e=this.ingredients.length,n=Math.ceil(e/3);this.time=15*n}},{key:"calcServings",value:function(){this.servings=4}},{key:"parseIngredients",value:function parseIngredients(){var unitLong=["tablespoons","tablespoon","ounce","ounces","teaspoon","teaspoons","cups","pounds"],unitShort=["tbsp","tbsp","oz","oz","tsp","tsp","cup","pound"],newIngredients=this.ingredients.map(function(el){var ingredient=el.toLowerCase();unitLong.forEach(function(e,n){ingredient=ingredient.replace(e,unitShort[n])}),ingredient=ingredient.replace(/ *\([^)]*\) */g," ");var arrIng=ingredient.split(" "),unitIndex=arrIng.findIndex(function(e){return unitShort.includes(e)}),objIng,arrCount,count,count,objIng;return-1<unitIndex?(arrCount=arrIng.slice(0,unitIndex),count=1===arrCount.length?eval(arrIng[0].replace("-","+")):eval(arrIng.slice(0,unitIndex).join("+")),objIng={count:count,unit:arrIng[unitIndex],ingredient:arrIng.slice(unitIndex+1).join(" ")}):parseInt(arrIng[0],10)?objIng={count:parseInt(arrIng[0],10),unit:"",ingredient:arrIng.slice(1).join(" ")}:-1===unitIndex&&(objIng={count:1,unit:"",ingredient:ingredient}),objIng});this.ingredients=newIngredients}}]),Recipe}();exports.default=Recipe;